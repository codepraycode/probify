
generator client {
  provider = "prisma-client-js"
  output   = "../src/db/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ExerciseSession {
  id        String   @id @default(cuid())
  duration  Int      // Total duration in seconds 
  minutes   Int?
  seconds   Int?
  report    ExerciseReport? @relation(fields: [reportid], references: [id])
  reportid String?
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt
}


model ExerciseReport {
  id             String             @id @default(cuid())
  score          Int
  total          Int
  accuracy       Float              // e.g., 75.5 for 75.5%
  answers        SubmittedAnswer[]
  createdAt      DateTime           @default(now())

  ExerciseSession ExerciseSession[]
}

model SubmittedAnswer {
  id            String          @id @default(cuid())
  reportId      String
  report        ExerciseReport  @relation(fields: [reportId], references: [id], onDelete: Cascade)
  questionId    String             // Matches the QuestionId from your JSON
  questionType  QuestionType
  selected      String          // Plain text selected value
  correct       Boolean
  correctAnswer String
  hint          String          // Plain or KaTeX as string
}


enum QuestionType {
  mcq
  fill
}
